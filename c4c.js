//<div class="content-item sapClientBaseControlsSimpleVLayout saplsui-widthauto" id="__layout912-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-ui="__layout912-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-automation-id="9580ca2f3667645fdeab6ccd7fcdcdeb" data-help-id="9580ca2f3667645fdeab6ccd7fcdcdeb"><span id="label034d4ff0a49641d0923dd0411133ff27_3256-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-ui="label034d4ff0a49641d0923dd0411133ff27_3256-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-automation-id="034d4ff0a49641d0923dd0411133ff27" data-help-id="034d4ff0a49641d0923dd0411133ff27" style="text-align:left" class="item-label sapClientControlsCoreLabel sapMLabel sapMLabelMaxWidth sapUiSelectable saplsui-widthauto" title="Loss Reason"><bdi id="label034d4ff0a49641d0923dd0411133ff27_3256-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0-bdi">Loss Reason</bdi></span><div id="__container293-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-ui="__container293-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" class="item-value sapClientBaseControlsCoreInPlaceEditContainer sapClientBaseControlsCoreOberonComposite sapClientMComboBox width-code-form-value-valueonly"><div id="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477" data-sap-ui="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477" style="max-width:100%;width:100%" class="sapMComboBox sapMComboBoxBase sapMComboBoxTextField sapMInputBase sapMInputBaseHasEndIcons sapMInputBaseHeightMargin" role="combobox"><div id="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-content" class="sapMInputBaseContentWrapper" style="width:100%"><input id="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-inner" value="Customer dropped project/inquiry" aria-autocomplete="both" aria-expanded="false" autocomplete="off" autocorrect="off" autocapitalize="off" type="text" class="sapMComboBoxInner sapMInputBaseInner"><div tabindex="-1" class="sapMInputBaseIconContainer"><span id="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-arrow" data-sap-ui="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-arrow" aria-labelledby=" dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-arrow-label" role="button" data-sap-ui-icon-content="î‡¯" class="sapMInputBaseIcon sapUiIcon sapUiIconMirrorInRTL sapUiIconPointer" style="font-family:'SAP-icons'"><span id="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-arrow-label" data-sap-ui="dropdownlistbox8af4d812b29dd2ca535f60ec85b5efb6_3477-arrow-label" class="sapUiInvisibleText" aria-hidden="true">Select Options</span></span></div></div></div></div></div>

//Won Reason
//<div class="content-item sapClientBaseControlsSimpleVLayout saplsui-widthauto" id="__layout911-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-ui="__layout911-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-automation-id="bb2e202ee5561fcac2980bd55e4d8d61" data-help-id="bb2e202ee5561fcac2980bd55e4d8d61">

//Loss Reason
//<div class="content-item sapClientBaseControlsSimpleVLayout saplsui-widthauto" id="__layout912-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-ui="__layout912-listdefintion09c238ade45434ac206e9078b639b2b2_3225-0" data-sap-automation-id="9580ca2f3667645fdeab6ccd7fcdcdeb" data-help-id="9580ca2f3667645fdeab6ccd7fcdcdeb">

//<td id="__item7732-listdefintion09c238ade45434ac206e9078b639b2b2_25277-clone0_cell7" data-sap-ui-column="listdefintion09c238ade45434ac206e9078b639b2b2_25277-tblHead8" headers="column9580ca2f3667645fdeab6ccd7fcdcdeb_25307-colHeader" style="text-align:left" class="sapClientMComboBoxColumn sapMSize-large sapMListTblCell">

//<td id="__item8025-listdefintion09c238ade45434ac206e9078b639b2b2_26471-clone0_cell7" data-sap-ui-column="listdefintion09c238ade45434ac206e9078b639b2b2_26471-tblHead8" headers="column9580ca2f3667645fdeab6ccd7fcdcdeb_26501-colHeader" style="text-align:left" class="sapClientMComboBoxColumn sapMSize-large sapMListTblCell">

// <td id="__item8374-listdefintion09c238ade45434ac206e9078b639b2b2_27670-clone0_cell7" data-sap-ui-column="listdefintion09c238ade45434ac206e9078b639b2b2_27670-tblHead8" headers="column9580ca2f3667645fdeab6ccd7fcdcdeb_27700-colHeader" style="text-align:left" class="sapClientMComboBoxColumn sapMSize-large sapMListTblCell">

//<td id="__item862-listdefintion09c238ade45434ac206e9078b639b2b2_2066-clone0_cell7" data-sap-ui-column="listdefintion09c238ade45434ac206e9078b639b2b2_2066-tblHead8" headers="column9580ca2f3667645fdeab6ccd7fcdcdeb_2096-colHeader" style="text-align:left" class="sapClientMComboBoxColumn sapMSize-large sapMListTblCell">

/*
var items = [...document.querySelectorAll('[headers^="column9580ca2f3667645fdeab6ccd7fcdcdeb"]')]
items.map(i=>[i.textContent, i.previousSibling.textContent])
var processItems = async ()=>{
    let sleep = (to) => new Promise((res,rej)=>setTimeout(res, to));
    var td = items.pop();
    let [loss, won] = [td.textContent, td.previousSibling.textContent];
    let notOk = (won==='Price' && loss!=='') || (won==='' && loss!=='Customer dropped project/inquiry');
    if(!notOk) return;
    td.querySelector('span[role="button"]').click();
    await sleep(0);
    for(let i=0; i<1000; i++){
        i3=td.querySelector('input');
        if(i3) break;
        //if (i3 && !i3.ariaBusy) break;
        await sleep(10);
    };
    let i = i3;
    i.value= won==='Price' ? '' : 'Customer dropped project/inquiry';
    var ke = new KeyboardEvent('keydown', {
        bubbles: true, cancelable: true, keyCode: 13
    });
    i.dispatchEvent(ke)
}
while(items){
await processItems()
}
*/


var lossReasons = [...document.querySelectorAll('[headers^="column9580ca2f3667645fdeab6ccd7fcdcdeb"] input')]
for(let lossReason of lossReasons) {
    let row = lossReason.closest('tr');
    let wonReason = row.querySelector('[headers^="columnbb2e202ee5561fcac2980bd55e4d8d61"] input')
    let rowSelected = row.querySelector('td.sapMListTblSelCol input')
    let [loss, won, selected] = [lossReason.value, wonReason.value, rowSelected.checked];
    let notOk = (won==='Price' && loss!=='') || (won==='' && loss!=='Customer dropped project/inquiry');
    if(!notOk && !selected) continue;
    if(selected) wonReason.value = 'Price';
    lossReason.value= wonReason.value==='Price' ? '' : 'Customer dropped project/inquiry';
    var ke = new KeyboardEvent('keydown', {
        bubbles: true, cancelable: true, keyCode: 13
    });
    wonReason.dispatchEvent(ke)
    lossReason.dispatchEvent(ke)
}
